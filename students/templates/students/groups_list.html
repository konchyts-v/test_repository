{% extends "students/base.html" %}

{% load staticfiles %}

{% block meta_title %}Список Груп{% endblock meta_title %}

{% block title %}Список Груп{% endblock title %}

{% block content %}
		  {% if groups %}
          <!-- Add Student Button -->
          <a class="btn btn-primary" href="{% url 'students_add' %}">Додати Студента</a>

          <!-- Start Students Listing -->
		  <table class="table table-hover table-striped">
		    <thead>
			  <tr>
				<th> <a href="">№</a></th>
				<th> 
				  <a href="{% url "groups" %}?order_by=title{% if request.GET.order_by == 'title' and request.GET.reverse != '1' %}&amp;reverse=1{% endif %}">
					Назва
					{% if order_by == 'title' and reverse != '1' %}&uarr;
					{% elif order_by == 'title' and reverse == '1' %}&darr;
					{% endif %}
				  </a>
				</th>
				<th>
				  <a href="{% url "groups" %}?order_by=leader{% if request.GET.order_by == 'leader' and request.GET.reverse != '1' %}&amp;reverse=1{% endif %}">
				    Староста
				    {% if order_by == 'leader' and reverse != '1' %}&uarr;
					{% elif order_by == 'leader' and reverse == '1' %}&darr;
					{% endif %}
				  </a>
				</th>
				<th> Дії</th>
			  </tr>
			</thead>
			<tbody>
			  {% for group in groups %}
			    <tr>
				  <td>{{ forloop.counter }}</td>
				  <td> <a href="{% url "groups_edit" group.id %}">{{ group.title }}</a></td>
				  <td> {% if group.leader %}<a href="{% url "students_edit" group.leader.id %}">{{ group.leader.last_name }} {{ group.leader.first_name }}</a>{% else %}Немає{% endif %}</td>
				  <td>
				    <div class="dropdown">
				      <button class="btn btn-default dropdown-toggle"
				    		  type="button" data-toggle="dropdown">Дія
				        <span class="caret"></span>
				      </button>
				      <ul class="dropdown-menu" role="menu"> 
				        <li><a href="{% url "groups_edit" group.id %}">Редагувати</a></li>
                        <li><a href="{% url "groups_delete" group.id %}">Видалити</a></li>
				      </ul>
				    </div>
				  </td>
			    </tr>
			  {% endfor %}
			</tbody>
		  </table>
		  {% else %}
		  <p>Поки немає груп у базі.</p>
		  {% endif %}
		  {% if groups.has_other_pages %}
		  <nav>
			<ul class="pagination">
			  <li><a href="{% url "groups" %}?page=1&amp;order_by={{ request.GET.order_by }}&amp;reverse={{ request.GET.reverse }}">&laquo;</a></li>
			  {% for p in groups.paginator.page_range %}
			  <li {% if groups.number == p %}class="active"{% endif %}>
			    <a href="{% url "groups" %}?page={{ p }}&amp;order_by={{ request.GET.order_by }}&amp;reverse={{ request.GET.reverse }}">{{ p }}</a>
			  </li>
			  {% endfor %}
			  <li><a href="{% url "groups" %}?page={{ groups.paginator.num_pages }}&amp;order_by={{ request.GET.order_by }}&amp;reverse={{ request.GET.reverse }}">&raquo;</a></li>
			</ul>
		  </nav>
		  {% endif %}
		  <!-- End Students Listing -->
		  {% endblock content %}